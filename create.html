<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Créer ton Défi</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="fade-in">
  <div class="container">
    <h2>🧠 Réponds à ces questions sur toi</h2>

    <div id="questions"></div>
    <button id="finishBtn">Terminer & Générer le lien</button>

    <div id="shareSection" class="hidden">
      <p>Partage ton lien 👇</p>
      <input type="text" id="shareLink" readonly>
      <div class="socials">
        <a id="whatsapp" target="_blank">📱 WhatsApp</a>
        <a id="facebook" target="_blank">📘 Facebook</a>
        <a id="twitter" target="_blank">🐦 Twitter</a>
      </div>
    </div>
  </div>

  <script>
    const questions = [
      "Ton plat préféré ?",
      "Ton sport préféré ?",
      "Ton animal préféré ?",
      "Ta couleur préférée ?",
      "Ton rêve le plus fou ?"
    ];

    const qContainer = document.getElementById("questions");
    questions.forEach((q, i) => {
      qContainer.innerHTML += `
        <label>${q}</label>
        <input type="text" id="q${i}" placeholder="Ta réponse..." />
      `;
    });

    document.getElementById("finishBtn").addEventListener("click", () => {
      const name = localStorage.getItem("creatorName");
      let answers = {};
      questions.forEach((_, i) => answers[i] = document.getElementById("q"+i).value);

      localStorage.setItem("answers", JSON.stringify(answers));

      const shareURL = `${window.location.origin}${window.location.pathname.replace("create.html","play.html")}?user=${encodeURIComponent(name)}`;
      document.getElementById("shareLink").value = shareURL;

      document.getElementById("shareSection").classList.remove("hidden");

      document.getElementById("whatsapp").href = `https://wa.me/?text=${encodeURIComponent("🔥 Viens deviner mes réponses ! " + shareURL)}`;
      document.getElementById("facebook").href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareURL)}`;
      document.getElementById("twitter").href = `https://twitter.com/intent/tweet?url=${encodeURIComponent(shareURL)}&text=🔥 Défi Amis !`;
    });
  </script>
</body>
</html>